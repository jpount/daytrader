graph TB
    subgraph "DayTrader3 Module Dependencies and Package Structure"
        
        subgraph "Maven Multi-Module Structure"
            ROOT[daytrader3 Root POM<br/>net.wasdev.wlp.sample:daytrader3<br/>Packaging: pom<br/>Java 7 Parent<br/>Version: 1.0-SNAPSHOT]
            
            subgraph "Core Application Modules"
                EJB[daytrader3-ee6-ejb<br/>Packaging: jar - ejb<br/>Final Name: dt-ejb<br/>Business Logic Layer]
                WEB[daytrader3-ee6-web<br/>Packaging: war<br/>Final Name: web<br/>Presentation Layer]
                REST[daytrader3-ee6-rest<br/>Packaging: war<br/>Final Name: Rest<br/>REST Services Layer]
                EAR[daytrader3-ee6<br/>Packaging: ear<br/>Application Assembly<br/>Bundle: daytrader3-ee6.ear]
                CFG[daytrader3-ee6-wlpcfg<br/>Server Configuration<br/>Liberty Profile Setup<br/>Derby Database]
            end
        end

        subgraph "Build-Time Dependencies"
            ROOT --> EJB
            ROOT --> WEB
            ROOT --> REST
            ROOT --> EAR
            ROOT --> CFG
            
            WEB --> EJB
            EAR --> EJB
            EAR --> WEB
            EAR --> REST
        end

        subgraph "External Library Dependencies"
            subgraph "Java EE API Dependencies - Provided"
                SERVLET[javax.servlet-api:3.0.1<br/>Web container services]
                EJB_API[ejb-api:3.0<br/>EJB container services]
                JMS_API[jms-api:1.1-rev-1<br/>Messaging services]
                JPA_API[hibernate-jpa-2.0-api:1.0.1.Final<br/>Persistence services]
                JTA_API[jta:1.1<br/>Transaction services]
                JSF_API[javax.faces-api:2.1<br/>JSF framework]
            end

            subgraph "Runtime Dependencies"
                TAGLIBS[taglibs:standard:1.1.1<br/>JSP tag libraries]
                DERBY[org.apache.derby:derby:10.10.1.1<br/>Embedded database]
            end
        end

        subgraph "Package Structure - daytrader3-ee6-ejb"
            subgraph "Core Business Package"
                CORE_PKG[com.ibm.websphere.samples.daytrader<br/>├── TradeServices.java - Interface<br/>├── TradeAction.java - Facade<br/>├── TradeConfig.java - Configuration<br/>├── *DataBean.java - JPA Entities<br/>├── MarketSummaryDataBean.java<br/>└── RunStatsDataBean.java]
            end

            subgraph "EJB3 Implementation Package"
                EJB3_PKG[com.ibm.websphere.samples.daytrader.ejb3<br/>├── TradeSLSBBean.java - @Stateless<br/>├── TradeSLSBLocal.java - Local Interface<br/>├── DirectSLSBBean.java - @Stateless<br/>├── DirectSLSBLocal.java - Local Interface<br/>├── DTBroker3MDB.java - @MessageDriven<br/>└── DTStreamer3MDB.java - @MessageDriven]
            end

            subgraph "Direct Access Package"
                DIRECT_PKG[com.ibm.websphere.samples.daytrader.direct<br/>├── TradeDirect.java  - Direct JDBC<br/>└── KeySequenceDirect.java  - ID Generation]
            end

            subgraph "Utility Package"
                UTIL_PKG[com.ibm.websphere.samples.daytrader.util<br/>├── Log.java  - Logging Framework<br/>├── FinancialUtils.java  - Calculations<br/>├── MDBStats.java  - Message Statistics<br/>├── TimerStat.java  - Performance Metrics<br/>└── KeyBlock.java  - ID Management]
            end
        end

        subgraph "Package Structure - daytrader3-ee6-web"
            subgraph "Web Controller Package"
                WEB_PKG[com.ibm.websphere.samples.daytrader.web<br/>├── TradeAppServlet.java  - @WebServlet<br/>├── TradeServletAction.java  - Web Facade<br/>├── TradeScenarioServlet.java  - Benchmarking<br/>├── TradeConfigServlet.java  - Configuration<br/>├── TradeBuildDB.java  - DB Utilities<br/>├── OrdersAlertFilter.java  - @WebFilter<br/>└── TradeWebContextListener.java  - @WebListener]
            end

            subgraph "JSF Managed Beans"
                JSF_PKG[com.ibm.websphere.samples.daytrader.web.jsf<br/>├── AccountBean.java  - @ManagedBean<br/>└── QuoteBean.java  - @ManagedBean]
            end

            subgraph "Performance Primitives"
                PRIMS_PKG[com.ibm.websphere.samples.daytrader.web.prims<br/>├── PingServlet*.java  - Performance Tests<br/>├── PingJDBC*.java  - Database Tests<br/>├── PingSession*.java  - Session Tests<br/>└── ejb3/  - EJB Integration Tests]
            end
        end

        subgraph "Package Structure - daytrader3-ee6-rest"
            REST_PKG[com.ibm.websphere.samples.daytrader.rest<br/>├── AddressApplication.java  - @ApplicationPath<br/>├── AddressBook.java  - @Path - REST Resource<br/>├── AddressBookDatabase.java  - Data Access<br/>├── Address.java  - Data Model<br/>├── AddressList.java  - Collection Wrapper<br/>└── ObjectFactory.java  - JAXB Factory]
        end

        subgraph "Runtime Deployment Structure  - EAR"
            subgraph "Enterprise Archive Layout"
                EAR_STRUCTURE[daytrader3-ee6.ear<br/>├── META-INF/<br/>│   ├── application.xml<br/>│   ├── DEPENDENCIES<br/>│   └── LICENSE.txt<br/>├── dt-ejb.jar  - EJB Module<br/>├── web.war  - Main Web Module<br/>└── Rest.war  - REST Service Module]
            end

            subgraph "Web Archive Structure - web.war"
                WAR_STRUCTURE[web.war<br/>├── WEB-INF/<br/>│   ├── web.xml  - Deployment Descriptor<br/>│   ├── faces-config.xml  - JSF Configuration<br/>│   ├── ibm-web-bnd.xml  - Liberty Bindings<br/>│   └── classes/  - Compiled Classes<br/>├── *.jsp  - JSP Pages<br/>├── *.html  - Static Pages<br/>├── images/  - Graphics Assets<br/>├── style.css  - Stylesheets<br/>└── docs/  - Documentation]
            end

            subgraph "EJB Archive Structure - dt-ejb.jar"
                JAR_STRUCTURE[dt-ejb.jar<br/>├── META-INF/<br/>│   ├── persistence.xml  - JPA Configuration<br/>│   ├── ejb-jar.xml  - EJB Deployment<br/>│   ├── ibm-ejb-jar-bnd.xml  - Liberty Bindings<br/>│   └── daytrader.sql  - Database Schema<br/>└── com/ibm/websphere/samples/daytrader/<br/>     - Compiled Business Classes]
            end
        end

        subgraph "Liberty Server Configuration Structure"
            subgraph "Server Layout"
                SERVER_STRUCTURE[daytrader3_Sample Server<br/>├── server.xml  - Main Configuration<br/>├── apps/<br/>│   └── daytrader3-ee6.ear<br/>├── dropins/  - Hot Deployment<br/>├── derby.log  - Database Logs<br/>├── messaging/  - JMS Message Store<br/>└── tranlog/  - Transaction Logs]
            end

            subgraph "Shared Resources"
                SHARED_STRUCTURE[shared/resources/<br/>├── Daytrader3_SampleDerbyLibs/<br/>│   └── derby-10.10.1.1.jar<br/>└── data/tradedb/  - Derby Database<br/>    ├── db.lck  - Database Lock<br/>    ├── log/  - Transaction Logs<br/>    └── seg0/  - Data Segments]
            end
        end

        subgraph "Cross-Cutting Dependencies"
            subgraph "Configuration Dependencies"
                CONFIG_DEPS[TradeConfig Runtime Modes:<br/>- EJB3: Full container services<br/>- SESSION3: Direct session access<br/>- DIRECT: Pure JDBC access<br/>Service Locator Pattern]
            end

            subgraph "Logging Dependencies"
                LOG_DEPS[Logging Framework:<br/>- Log.java utility class<br/>- Debug and trace levels<br/>- Performance metrics<br/>- Cross-module usage]
            end

            subgraph "Security Dependencies"
                SEC_DEPS[Security Context:<br/>- Container-managed security<br/>- Principal propagation<br/>- Role-based access control<br/>- Method-level security]
            end
        end
    end

    %% Module dependencies
    EJB --> CORE_PKG
    EJB --> EJB3_PKG
    EJB --> DIRECT_PKG
    EJB --> UTIL_PKG
    
    WEB --> WEB_PKG
    WEB --> JSF_PKG
    WEB --> PRIMS_PKG
    
    REST --> REST_PKG
    
    %% API Dependencies
    EJB --> EJB_API
    EJB --> JMS_API
    EJB --> JPA_API
    EJB --> JTA_API
    
    WEB --> SERVLET
    WEB --> JSF_API
    WEB --> TAGLIBS
    
    %% Runtime assembly
    EAR --> EAR_STRUCTURE
    EAR_STRUCTURE --> WAR_STRUCTURE
    EAR_STRUCTURE --> JAR_STRUCTURE
    
    CFG --> SERVER_STRUCTURE
    CFG --> SHARED_STRUCTURE
    CFG --> DERBY
    
    %% Cross-cutting
    CORE_PKG --> CONFIG_DEPS
    WEB_PKG --> CONFIG_DEPS
    UTIL_PKG --> LOG_DEPS
    CORE_PKG --> LOG_DEPS
    WEB_PKG --> LOG_DEPS
    EJB3_PKG --> SEC_DEPS
    WEB_PKG --> SEC_DEPS


    classDef module fill:#E8F5E8,stroke:#388E3C,stroke-width:2px
    classDef package fill:#E1F5FE,stroke:#0277BD,stroke-width:2px
    classDef dependency fill:#FFF3E0,stroke:#F57C00,stroke-width:2px
    classDef structure fill:#F3E5F5,stroke:#7B1FA2,stroke-width:2px
    classDef runtime fill:#FFE0B2,stroke:#FF9800,stroke-width:2px
    classDef config fill:#F5F5F5,stroke:#616161,stroke-width:2px
    classDef layer fill:#E0F2F1,stroke:#00796B,stroke-width:2px

    class ROOT,EJB,WEB,REST,EAR,CFG module
    class CORE_PKG,EJB3_PKG,DIRECT_PKG,UTIL_PKG,WEB_PKG,JSF_PKG,PRIMS_PKG,REST_PKG package
    class SERVLET,EJB_API,JMS_API,JPA_API,JTA_API,JSF_API,TAGLIBS,DERBY dependency
    class EAR_STRUCTURE,WAR_STRUCTURE,JAR_STRUCTURE,SERVER_STRUCTURE,SHARED_STRUCTURE structure
    class CONFIG_DEPS,LOG_DEPS,SEC_DEPS config
